# Cucumber Messages Configuration

There are two ways to configure Cucumber Messages support within Reqnroll.

* [](#config-file)
* [](#environment-variable)

## Defaults
Unless overriden by the use of the Reqnroll configuration file and/or environment variable, Reqnroll will use the following defaults to configure support for Cucumber Messages.
```{list-table}
:header-rows: 1

* - Setting
  - Value
  - Description
* - Enable
  - true/false
  - Controls whether Cucumber Messages will be created during the execution of the test. <br/> *Default:* `false`
* - Base Directory
  - relative or absolute file storage path
  - Specifies the root location for storage of Cucumber Messages result files. <br/> *Default:* `.` (i.e., current folder)
* - Output Directory
  - folder(/path) relative to the BasePath
  - Folder relative to the Base Path for storage of Cucumber Messages results files. <br/> *Default:* `` (none)
* - Output FileName
  - filename(.ndjson)
  - The file name in which Cucumber Messages will be stored. By convention, these files use the `.ndjson` extension. <br/> *Default:* `reqnroll_report.ndjson`
* - ID Generation Style
  - UUID/INCREMENTING
  - Message elements within the .ndjson will be given IDs according to this style directive. Incrementing IDs are integers that start at 1. <br/> *Default:* `UUID`
```

{#config-file}
## Configuration File
Reqnroll will use values from the reqnroll.json configuration file to control the above settings. To use the configuration file, add a json object to your project's reqnroll.json file.
An example configuration file looks like this:

```{code-block} json
:caption: reqnroll.json
{
  "$schema": "https://schemas.reqnroll.net/reqnroll-config-latest.json",

    "bindingAssemblies": [
    ],
    "cucumberMessagesConfiguration": {
        "enabled" :  true,
        "baseDirectory": "C:\\Users\\dev\\source\\repos\\reqnroll_project",
        "outputDirectory": "CucumberMessages",
        "outputFileName" :  "reqnroll_report.ndjson",
        "iDGenerationStyle": "INCREMENTING"
    }
}
```

In the above example, the configuration file instructs Reqnroll to turn Cucumber Message support ON, store the file in an absolute path (C:\\Users\\dev\\source\\repos\\reqnroll_project\\CucumberMessages\\reqnroll_report.ndjson). 


The json schema for this section of the configuration file is:
```{code-block} json
:caption: cucumbermessages.config-schema.json
{
    "description": "This class holds configuration information from a configuration source for Reqnroll Cucumber Message Generation.\n",
    "properties": {
        "Enabled": {
            "type": "boolean"
        },
        "BaseDirectory": {
            "type": "string"
        },
        "OutputDirectory": {
            "type": "string"
        },
        "OutputFileName": {
            "type": "string"
        },
        "IDGenerationStyle": {
            "type": "string"
        }
    }
}
```

{#environment-variable}
## Environment Variables

Any of the settings discussed above can be overriden by setting an Environment Variable. When an environment variable is set, it takes precedence over the same configuration setting in the configuration file. If a setting is not overridden by an evironment variable, the value will be taken from the configuration file (if set), otherwise a default (as shown above) will be used.

The available Environment Variables are:

* REQNROLL__CUCUMBER_MESSAGES__ENABLED
* REQNROLL__CUCUMBER_MESSAGES__OUTPUT_BASE_DIRECTORY
* REQNROLL__CUCUMBER_MESSAGES__OUTPUT_DIRECTORY
* REQNROLL__CUCUMBER_MESSAGES__OUTPUT_FILENAME
* REQNROLL__CUCUMBER_MESSAGES__ID_GENERATION_STYLE

